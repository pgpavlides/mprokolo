// content.js for Green Cover Extension v0.5

// ASCII Art for Green Cover Extension
const greenCoverAsciiArt = `
                                ######%                                                             
                               %%                                                                   
                                                                                                    
                                               ........                                             
                                           ....-*#####+....                                         
                                        ..:*##*+======++##+..                                       
                                      ..=##===============+#*..                                     
                            ..       ..##===================##..      ...                           
                      ....:=**+-.....:#+=====================*#.....-+***=:....                     
                   ...+##*=-::-=+##*=#+======================+#####*+====+**##*:...                 
                 ...##-::::::-====--*##========================================##*..                
                ..+#=:::-=============+##========================================*#=..              
               ..+#:::=============================================================#*..             
               ..#=:-===============================================================#*..            
               .=#:-================================================================+#..            
               .=#:==================================================================#..            
               .-#=======================#+=+##======================================#..            
             ....#*=======================##*=======================================+#..            
          ..=##*+++=================================================================##:.....        
        ..-#*:-====================================================================+########=..     
       ..=#-:======================================================================*********##*..   
       .-#=:=======================================================================***********##..  
      ..**:-============#*=========================================================************#+.. 
      ..#+:-============#+=================================================#+======************#*.. 
      ..**:-============+#####=============================================##======************#:.. 
       .:#+:=====================================*#+========================###====+********#*##..  
        .:##:======================================####*============================*********##+..  
         ..:###+====================================================================+**********##:. 
            ...=#*===================*#==============================================***********##..
               ..*#+================*##+=============================================************#:.
                ..:##+=============#####=======================#*====================************#:.
                  ...-###*++=+**#####..##===========================================************##..
                      ....:#*+-::-*#   .*#*==============+##+======================+***********##...
                         ..#+:::==##    ..*###*+===+**###+#=======================+***********##... 
                          .#*::===*#      ##===+*###*#+..=#======================+**********###...  
                          .**:=====##     #*=======**##  -#====================+*******#####-...    
##                        .+*:=====*#%   ##========**##  .#==================+*********###*..       
%##                       .**-======*#%##*========**########==============+***************#-.       
 %#%                      .#*-=======##==========**##======##==========+******************#:.       
 ##%                      .#+========#*=========*##+========*##+==++####*****************#+..       
                         .-#-=======+#=========+##=======****##++*=...*#****************##..        
                         .+#-=======+*=========+#=====*****##:.....   -##**************##..         
#%                       .#+========================+****##...         -##***********##=..          
                        .+#-=======================****##+..            .=####*#####*....           
                        .#========================****##..               .............              
                       .*#-===*##+=====####+=====****##..                                           
                       .#+===*+==*#+======+#+===****##..                                            
                      .*#=========#========#*===****#-.                                             
                      .#*======================+***##.                                              
                     ..#+======================****#:.              %###%                           
                     .:#===========#**#*======+***##.              %#                               
                     .:#+=============+*======****#..                                      ==       
                     ..#+====================+***#*.            ##                       ======     
                     ..##====================***##..                                     ======     
                      ..#*==================***##..                                      ======     
                       ..##===============****##..                                                  
                       ...=##==========+****##=..                                  =====            
                         ...:###+==+*****###-..                                    =====            
                           .....-*#####*+:....                                                      
                              .............                                                         
`;

// Custom console logging function
const customConsoleLog = (originalMethod, ...args) => {
    // Filter out specific messages
    const filteredMessages = args.filter(arg => {
        // Check for react-devtools-bridge messages or other unwanted logs
        if (typeof arg === 'object' && arg?.source === 'react-devtools-bridge') {
            return false;
        }
        return true;
    });

    // If there are any remaining messages, log them
    if (filteredMessages.length > 0) {
        // Log Green Cover Extension header with ASCII art for filtered messages
        console.log(`%c Green Cover Extension v0.5 \n${greenCoverAsciiArt}`, 'color: green; font-weight: bold;');
        originalMethod.apply(console, filteredMessages);
    }
};

// Wrap console methods to filter messages
const wrapConsoleMethod = (method) => {
    const originalMethod = console[method];
    console[method] = (...args) => {
        customConsoleLog(originalMethod, ...args);
    };
};

// Wrap log, warn, and error methods
['log', 'warn', 'error'].forEach(wrapConsoleMethod);